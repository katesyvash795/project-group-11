var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},e={},o={},n=t.parcelRequired7c6;null==n&&((n=function(t){if(t in e)return e[t].exports;if(t in o){var n=o[t];delete o[t];var l={id:t,exports:{}};return e[t]=l,n.call(l.exports,l,l.exports),l.exports}var i=new Error("Cannot find module '"+t+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(t,e){o[t]=e},t.parcelRequired7c6=n);async function l(){return await fetch("https://books-backend.p.goit.global/books/top-books").then((t=>t.json()))}async function i(t){return await fetch(`https://books-backend.p.goit.global/books/category?category=${t}`).then((t=>t.json()))}async function a(t){return await fetch(`https://books-backend.p.goit.global/books//${t}`).then((t=>t.json()))}document.querySelector(".category-list-cont");const s=document.querySelector(".modal-close"),r=document.querySelector(".modal"),c={modalImage:document.querySelector(".modal-image"),modalTitle:document.querySelector(".modal-title"),modalAuthor:document.querySelector(".modal-author"),modalDescription:document.querySelector(".modal-description"),modal1:document.querySelector(".modal-amazon-link"),modal2:document.querySelector(".modal-apple-link"),modal3:document.querySelector(".modal-shop-link"),modalButton:document.querySelector(".modal-button"),afterButton:document.querySelector(".after-button")};function d(){document.querySelectorAll(".category-item, .best-book-item").forEach((t=>{t.addEventListener("click",(t=>{c.modalAuthor.textContent="",c.modalTitle.textContent="",c.modalDescription.textContent="",c.modalImage.setAttribute("src",""),c.modal1.setAttribute("href",""),c.modal2.setAttribute("href",""),c.modal3.setAttribute("href","");a(t.currentTarget.dataset.id).then((t=>{c.modalAuthor.textContent=t.author,c.modalTitle.textContent=t.title,c.modalDescription.textContent=t.description,c.modalImage.setAttribute("src",t.book_image),c.modal1.setAttribute("href",t.buy_links[0].url),c.modal2.setAttribute("href",t.buy_links[1].url),c.modal3.setAttribute("href",t.buy_links[4].url);-1===(JSON.parse(localStorage.getItem("shoppingList"))||[]).findIndex((e=>e.title===t.title))?(c.modalButton.textContent="Add to shopping list",c.afterButton.textContent=""):(c.modalButton.textContent="Remove from the shopping list",c.afterButton.textContent='Congratulations! You have added the book to the shopping list. To delete, press the button "Remove from the shopping list".')})),r.classList.remove("visually-hidden"),document.body.classList.add("locked"),r.addEventListener("click",m),document.addEventListener("keydown",g)}))}))}function u(){r.classList.add("visually-hidden"),document.body.classList.remove("locked"),r.removeEventListener("click",m)}function m(t){t.target===r&&u()}function g(t){"Escape"===t.code&&(u(),document.removeEventListener("keydown",g))}s.addEventListener("click",u),c.modalButton.addEventListener("click",(function(){const t={author:c.modalAuthor.textContent,title:c.modalTitle.textContent,description:c.modalDescription.textContent,book_image:c.modalImage.getAttribute("src"),buy_links:[{url:c.modal1.getAttribute("href")},{url:c.modal2.getAttribute("href")},{url:c.modal3.getAttribute("href")}]},e=JSON.parse(localStorage.getItem("shoppingList"))||[],o=e.findIndex((e=>e.title===t.title));-1===o?(e.push(t),localStorage.setItem("shoppingList",JSON.stringify(e)),c.modalButton.textContent="Remove from the shopping list",c.afterButton.textContent='Congratulations! You have added the book to the shopping list. To delete, press the button "Remove from the shopping list".'):(e.splice(o,1),localStorage.setItem("shoppingList",JSON.stringify(e)),c.modalButton.textContent="Add to shopping list",c.afterButton.textContent="")}));const p=document.querySelector(".category-list-cont");function h(t){i(t).then((t=>{var e;e=function(t){const e=`<h2 class="title-category-list">${b(t[0].list_name)}</h2>`,o=t.map((t=>`<li class="category-item" data-id="${t._id}">\n        <div class="category-img-container">\n        <img class="category-item-img" src="${t.book_image} "/>\n        <p class="category-item-img-text-card">\n                    quick view \n                  </p>\n        </div>\n        <p class="category-item-title">${t.title}</p>\n        <p class="category-item-author">${t.author}</p>\n        </li>`)).join("");return`<div class="container select-category-cont">${e}<ul class="category-list">${o}</ul></div>`}(t),p.innerHTML=e,d()})).catch(console.log)}function b(t){const e=t.split(" "),o=e.length;let n="";if(o>1){for(let t=0;t<=o-2;t+=1)n+=" "+e[t];n+=` <span class=last-word-catteg-item>${e[o-1]}<span>`}else n=`<span class=last-word-catteg-item>${e[0]}<span>`;return n}const y=document.querySelector(".loader");var f=n("74Aiq");const k=document.querySelector(".category-list-cont");function v(t){const{list_name:e,books:o}=t;return`<li class="best-category-item">${`<h3 class="best-title-category-list">${e}</h3>`}<ul class="best-book-list">${o.map((t=>`\n        <li class="best-book-item" data-id="${t._id}">\n        <div class="category-img-container">\n          <img class="best-book-item-img" src="${t.book_image}" alt="${t.title}"/>\n          <p class="category-item-img-text-card">\n                    quick view \n                  </p>\n                  </div>\n          <h3 class="best-book-item-title">${t.title}</h3>\n          <p class="best-book-item-author">${t.author}</p>\n        </li>\n      `)).join("")}</ul>${`<button class="seemore-btn" type="button" data-id="${e}">See more</button>`}</li>`}function S(){y.style.display="block",l().then((t=>{const e=`<div class=" best-category-cont"><h2 class="best-title-section title-category-list">\n      ${b("Best Sellers Books")}</h2><ul class="best-category-list">${t.map(v).join("")}</ul></div>`;var o;o=e,k.innerHTML=o,d(),y.style.display="none"})).catch((t=>{console.log("Помилка при отриманні даних з сервера:",t)}))}S(),k.addEventListener("click",(t=>{"BUTTON"===t.target.nodeName&&(h(t.target.dataset.id),(0,f.scrollToTop)())}));const x=document.querySelector(".book-list-ul");(async function(){return await fetch("https://books-backend.p.goit.global/books/category-list").then((t=>t.json()))})().then((t=>{x.insertAdjacentHTML("beforeend",t.map((t=>` <li class="book-list-item">\n                     <a href="" class="book-list-link"><span>${t.list_name}</span></a>\n                </li>`)).join(""))})),x.addEventListener("click",(function(t){if(t.preventDefault(),"SPAN"!==t.target.nodeName)return;document.querySelector(".current").classList.remove("current");t.target.classList.add("current"),"All categories"===t.target.textContent?S():h(t.target.textContent)})),n("74Aiq"),n("dTazW"),n("bUb57"),n("lJ5oQ");
//# sourceMappingURL=index.12e6519c.js.map
